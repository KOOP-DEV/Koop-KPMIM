{% extends 'base.html' %}
{% load static %}

{% block title %}Carta Organisasi - Koperasi KPMIM{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/org-chart.css' %}">
{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="about-page-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center">
                <h1 class="display-4 fw-bold">Carta Organisasi</h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb justify-content-center">
                        <li class="breadcrumb-item"><a href="{% url 'home' %}" class="text-white">Utama</a></li>
                        <li class="breadcrumb-item"><a href="{% url 'organization' %}" class="text-white">Organisasi</a></li>
                        <li class="breadcrumb-item active text-white" aria-current="page">Carta Organisasi</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</div>

<section class="py-5">
    <div class="container">
        <div class="row mb-4">
            <div class="col-12 text-center">
                <h2 class="section-title mb-4">Koperasi Kolej Profesional MARA Indera Mahkota Kuantan Berhad</h2>
                <p class="lead">Sesi 2024 / 2025</p>
                <div class="mb-4">
                    <span class="badge bg-primary me-2">Klik pada profil untuk maklumat lanjut</span>
                </div>
            </div>
        </div>

        <div class="org-chart-container">
            <!-- Level 1: President -->
            <div class="org-level">
                <div class="org-card" data-bs-toggle="modal" data-bs-target="#memberModal" 
                     data-name="TN. HJ ABDUL BIELAL BIN ABDUL RAFAR" 
                     data-position="PENGERUSI"
                     data-email="abdul.bielal@kpmim.edu.my"
                     data-phone="012-3456789"
                     data-bio="Berkhidmat sebagai Pengerusi Koperasi KPMIM sejak 2022.">
                    <div class="org-card-inner">
                        <div class="org-avatar">
                            <img src="{% static 'img/org/president.jpg' %}" alt="Pengerusi">
                        </div>
                        <h4>TN. HJ ABDUL BIELAL BIN ABDUL RAFAR</h4>
                        <p class="position">PENGERUSI</p>
                    </div>
                </div>
            </div>

            <!-- Level 2: Vice President -->
            <div class="org-connector"></div>
            <div class="org-level">
                <div class="org-card" data-bs-toggle="modal" data-bs-target="#memberModal" 
                     data-name="EN. HAMIZUL HAZRIN BIN HASANI" 
                     data-position="TIMBALAN PENGERUSI"
                     data-email="hamizul.hazrin@kpmim.edu.my"
                     data-phone="012-8765432"
                     data-bio="Berkhidmat sebagai Timbalan Pengerusi Koperasi KPMIM sejak 2022.">
                    <div class="org-card-inner">
                        <div class="org-avatar">
                            <img src="{% static 'img/org/vice-president.jpg' %}" alt="Timbalan Pengerusi">
                        </div>
                        <h4>EN. HAMIZUL HAZRIN BIN HASANI</h4>
                        <p class="position">TIMBALAN PENGERUSI</p>
                    </div>
                </div>
            </div>

            <!-- Level 3: Secretary & Treasurer -->
            <div class="org-connector"></div>
            <div class="org-level level-3">
                <div class="org-card" data-bs-toggle="modal" data-bs-target="#memberModal" 
                     data-name="PN. NORZAIMAH BINTI MOHD DZIN" 
                     data-position="SETIAUSAHA"
                     data-email="norzaimah@kpmim.edu.my"
                     data-phone="019-7654321"
                     data-bio="Berkhidmat sebagai Setiausaha Koperasi KPMIM sejak 2023.">
                    <div class="org-card-inner">
                        <div class="org-avatar">
                            <img src="{% static 'img/org/secretary.jpg' %}" alt="Setiausaha">
                        </div>
                        <h4>PN. NORZAIMAH BINTI MOHD DZIN</h4>
                        <p class="position">SETIAUSAHA</p>
                    </div>
                </div>
                <div class="org-card" data-bs-toggle="modal" data-bs-target="#memberModal" 
                     data-name="EN. MUHAMMAD BUKHARI BIN MD. LAZI" 
                     data-position="BENDAHARI"
                     data-email="muhammad.bukhari@kpmim.edu.my"
                     data-phone="013-9876543"
                     data-bio="Berkhidmat sebagai Bendahari Koperasi KPMIM sejak 2023.">
                    <div class="org-card-inner">
                        <div class="org-avatar">
                            <img src="{% static 'img/org/treasurer.jpg' %}" alt="Bendahari">
                        </div>
                        <h4>EN. MUHAMMAD BUKHARI BIN MD. LAZI</h4>
                        <p class="position">BENDAHARI</p>
                    </div>
                </div>
            </div>

            <!-- Level 4: Department Heads -->
            <div class="org-connector"></div>
            <div class="org-level level-4">
                <div class="org-card" data-bs-toggle="modal" data-bs-target="#memberModal" 
                     data-name="PN. MAIZATUL ELIZA BINTI MANSOR" 
                     data-position="ALK - KOOP MART"
                     data-email="maizatul@kpmim.edu.my"
                     data-phone="014-7654321"
                     data-bio="Mengetuai unit Koop Mart sejak 2023.">
                    <div class="org-card-inner">
                        <div class="org-avatar">
                            <img src="{% static 'img/org/koop-mart.jpg' %}" alt="ALK Koop Mart">
                        </div>
                        <h4>PN. MAIZATUL ELIZA BINTI MANSOR</h4>
                        <p class="position">ALK - KOOP MART</p>
                    </div>
                </div>

                <div class="org-card" data-bs-toggle="modal" data-bs-target="#memberModal" 
                     data-name="PN. NOR SHARIHA BINTI AB YAZID" 
                     data-position="ALK - SEWAAN"
                     data-email="shariha@kpmim.edu.my"
                     data-phone="017-8765432"
                     data-bio="Mengetuai unit Sewaan sejak 2023.">
                    <div class="org-card-inner">
                        <div class="org-avatar">
                            <img src="{% static 'img/org/sewaan.jpg' %}" alt="ALK Sewaan">
                        </div>
                        <h4>PN. NOR SHARIHA BINTI AB YAZID</h4>
                        <p class="position">ALK - SEWAAN</p>
                    </div>
                </div>

                <div class="org-card" data-bs-toggle="modal" data-bs-target="#memberModal" 
                     data-name="PN. ROHIDA BINTI ABDUL WAHAB" 
                     data-position="ALK - PARCEL"
                     data-email="rohida@kpmim.edu.my"
                     data-phone="018-9876543"
                     data-bio="Mengetuai unit Parcel sejak 2023.">
                    <div class="org-card-inner">
                        <div class="org-avatar">
                            <img src="{% static 'img/org/parcel.jpg' %}" alt="ALK Parcel">
                        </div>
                        <h4>PN. ROHIDA BINTI ABDUL WAHAB</h4>
                        <p class="position">ALK - PARCEL</p>
                    </div>
                </div>

                <div class="org-card" data-bs-toggle="modal" data-bs-target="#memberModal" 
                     data-name="PN. NATASHA ERNI BINTI MOHD NOR" 
                     data-position="ALK - KEWANGAN"
                     data-email="natasha@kpmim.edu.my"
                     data-phone="019-8765432"
                     data-bio="Mengetuai unit Kewangan sejak 2023.">
                    <div class="org-card-inner">
                        <div class="org-avatar">
                            <img src="{% static 'img/org/kewangan.jpg' %}" alt="ALK Kewangan">
                        </div>
                        <h4>PN. NATASHA ERNI BINTI MOHD NOR</h4>
                        <p class="position">ALK - KEWANGAN</p>
                    </div>
                </div>
            </div>

            <!-- Level 5: More Department Heads -->
            <div class="org-connector"></div>
            <div class="org-level level-4">
                <div class="org-card" data-bs-toggle="modal" data-bs-target="#memberModal" 
                     data-name="EN. BADRISHAM BIN RAMLI" 
                     data-position="ALK - KAFETERIA"
                     data-email="badrisham@kpmim.edu.my"
                     data-phone="012-3456789"
                     data-bio="Mengetuai unit Kafeteria sejak 2023.">
                    <div class="org-card-inner">
                        <div class="org-avatar">
                            <img src="{% static 'img/org/kafeteria.jpg' %}" alt="ALK Kafeteria">
                        </div>
                        <h4>EN. BADRISHAM BIN RAMLI</h4>
                        <p class="position">ALK - KAFETERIA</p>
                    </div>
                </div>

                <div class="org-card" data-bs-toggle="modal" data-bs-target="#memberModal" 
                     data-name="EN. MUHAMMAD ILYAS BIN ABDUL LATIFF" 
                     data-position="ALK - DOBI"
                     data-email="ilyas@kpmim.edu.my"
                     data-phone="013-7654321"
                     data-bio="Mengetuai unit Dobi sejak 2023.">
                    <div class="org-card-inner">
                        <div class="org-avatar">
                            <img src="{% static 'img/org/dobi.jpg' %}" alt="ALK Dobi">
                        </div>
                        <h4>EN. MUHAMMAD ILYAS BIN ABDUL LATIFF</h4>
                        <p class="position">ALK - DOBI</p>
                    </div>
                </div>

                <div class="org-card" data-bs-toggle="modal" data-bs-target="#memberModal" 
                     data-name="EN. MAZLAN BIN ABD GHANI" 
                     data-position="ALK - PELANCONGAN"
                     data-email="mazlan@kpmim.edu.my"
                     data-phone="014-8765432"
                     data-bio="Mengetuai unit Pelancongan sejak 2023.">
                    <div class="org-card-inner">
                        <div class="org-avatar">
                            <img src="{% static 'img/org/pelancongan.jpg' %}" alt="ALK Pelancongan">
                        </div>
                        <h4>EN. MAZLAN BIN ABD GHANI</h4>
                        <p class="position">ALK - PELANCONGAN</p>
                    </div>
                </div>
            </div>

            <!-- Level 6: Student Representatives - All in One Row -->
            <div class="org-connector"></div>
            <div class="org-level student-level">
                <div class="org-card student-card" data-bs-toggle="modal" data-bs-target="#memberModal" 
                     data-name="MUHAMMAD ALIF ADAM BIN MUHAMMAD SUFFIAN" 
                     data-position="ALK - PELAJAR"
                     data-email="alif.adam@kpmim.edu.my"
                     data-phone="011-10765432"
                     data-bio="Wakil pelajar dalam Koperasi KPMIM sejak 2023.">
                    <div class="org-card-inner">
                        <h4>MUHAMMAD ALIF ADAM BIN MUHAMMAD SUFFIAN</h4>
                        <p class="position">ALK - PELAJAR</p>
                    </div>
                </div>

                <div class="org-card student-card" data-bs-toggle="modal" data-bs-target="#memberModal" 
                     data-name="NUR ANIS BINTI MOHD HAIR JOHARI" 
                     data-position="ALK - PELAJAR"
                     data-email="nur.anis@kpmim.edu.my"
                     data-phone="011-23456789"
                     data-bio="Wakil pelajar dalam Koperasi KPMIM sejak 2023.">
                    <div class="org-card-inner">
                        <h4>NUR ANIS BINTI MOHD HAIR JOHARI</h4>
                        <p class="position">ALK - PELAJAR</p>
                    </div>
                </div>

                <div class="org-card student-card" data-bs-toggle="modal" data-bs-target="#memberModal" 
                     data-name="MUHAMMAD AMEER HAFIY BIN MOHD HAZRI" 
                     data-position="ALK - PELAJAR"
                     data-email="ameer.hafiy@kpmim.edu.my"
                     data-phone="011-34567890"
                     data-bio="Wakil pelajar dalam Koperasi KPMIM sejak 2023.">
                    <div class="org-card-inner">
                        <h4>MUHAMMAD AMEER HAFIY BIN MOHD HAZRI</h4>
                        <p class="position">ALK - PELAJAR</p>
                    </div>
                </div>

                <div class="org-card student-card" data-bs-toggle="modal" data-bs-target="#memberModal" 
                     data-name="NUR 'AISYAH BINTI SABTU" 
                     data-position="ALK - PELAJAR"
                     data-email="aisyah.sabtu@kpmim.edu.my"
                     data-phone="011-45678901"
                     data-bio="Wakil pelajar dalam Koperasi KPMIM sejak 2023.">
                    <div class="org-card-inner">
                        <h4>NUR 'AISYAH BINTI SABTU</h4>
                        <p class="position">ALK - PELAJAR</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal for member details -->
        <div class="modal fade" id="memberModal" tabindex="-1" aria-labelledby="memberModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="memberModalLabel">Maklumat Ahli</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="text-center mb-4">
                            <div class="modal-avatar mx-auto mb-3" id="modalAvatarContainer">
                                <img src="" alt="Profile Image" id="modalImage">
                            </div>
                            <h3 id="modalName"></h3>
                            <p class="badge bg-primary" id="modalPosition"></p>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><i class="fas fa-envelope me-2 text-primary"></i> <span id="modalEmail"></span></p>
                            </div>
                            <div class="col-md-6">
                                <p><i class="fas fa-phone me-2 text-primary"></i> <span id="modalPhone"></span></p>
                            </div>
                        </div>
                        <div class="mt-3">
                            <h5>Biodata Ringkas</h5>
                            <p id="modalBio"></p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Handle modal data
        var memberModal = document.getElementById('memberModal');
        memberModal.addEventListener('show.bs.modal', function (event) {
            var button = event.relatedTarget;
            var name = button.getAttribute('data-name');
            var position = button.getAttribute('data-position');
            var email = button.getAttribute('data-email');
            var phone = button.getAttribute('data-phone');
            var bio = button.getAttribute('data-bio');
            
            // Update modal content
            document.getElementById('modalName').textContent = name;
            document.getElementById('modalPosition').textContent = position;
            document.getElementById('modalEmail').textContent = email;
            document.getElementById('modalPhone').textContent = phone;
            document.getElementById('modalBio').textContent = bio;
            
            // Handle image display (hide for students)
            var modalAvatarContainer = document.getElementById('modalAvatarContainer');
            if (position === "ALK - PELAJAR") {
                modalAvatarContainer.style.display = 'none';
            } else {
                modalAvatarContainer.style.display = 'block';
                var image = button.querySelector('.org-avatar img');
                if (image) {
                    document.getElementById('modalImage').src = image.src;
                }
            }
        });

        // Add hover effects
        const orgCards = document.querySelectorAll('.org-card');
        orgCards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.classList.add('hovered');
            });
            card.addEventListener('mouseleave', function() {
                this.classList.remove('hovered');
            });
        });
    });
</script>
{% endblock %} 